import React from 'react';
import { shallow, mount } from 'enzyme';
import getMuiTheme from 'material-ui/styles/getMuiTheme';
import { Col } from 'react-styled-flexboxgrid';
import { Tab } from 'material-ui/Tabs';
import { OrganizationNoRedux as Organization, TreeFull, parseNode, TreeForms } from '../../src/';

const data =  {"_id":"594be019ef063c0ddfd81edd","name":"root","description":"Default location","parent":null,"ancestors":[],"gyms":[],"users":[],"isActive":true,"children":[{"_id":"597a084b92ac5c0be80db761","name":"Japan town","description":"wew","parent":"594be019ef063c0ddfd81edd","ancestors":["594be019ef063c0ddfd81edd"],"gyms":[],"users":[],"isActive":true,"children":[{"_id":"597a087092ac5c0be80db762","name":"Ikekuburo","description":"Gang battle","parent":"597a084b92ac5c0be80db761","ancestors":["594be019ef063c0ddfd81edd","597a084b92ac5c0be80db761"],"gyms":[{"_id":"595d0f2d1f316e0ef971c43f","name":"Peak & Valley's"}],"users":[],"isActive":true}]},{"_id":"597a082f92ac5c0be80db760","name":"Another one","description":"Heroes","parent":"594be019ef063c0ddfd81edd","ancestors":["594be019ef063c0ddfd81edd"],"gyms":[],"users":[],"isActive":true},{"_id":"597789fcc2f3624490f7bd67","name":"Maryland - Land of the merriness","description":";)","parent":"594be019ef063c0ddfd81edd","ancestors":["594be019ef063c0ddfd81edd"],"gyms":[{"_id":"595d0f2d1f316e0ef971c43f","name":"Peak & Valley's"}],"users":[],"isActive":true,"children":[{"_id":"59778a32c2f3624490f7bd68","name":"Wellbridge","description":"The description is required ;)","parent":"597789fcc2f3624490f7bd67","ancestors":["594be019ef063c0ddfd81edd","597789fcc2f3624490f7bd67"],"gyms":[],"users":[],"isActive":true}]}]};
const gyms = [{"_id":"597a3813845e8760acd0589f","name_sort":"bl_gym_lgsy","multiple_fields":"bl gym wrdasfdgsdfa ","prefix":"lgsy","name":"BL GYM","address":"wrdasfdgsdfa","country":null,"membership":0,"city":null,"zipCode":null,"phoneNumber":"46343543","loc":{"type":"Point","_id":"597a3813845e8760acd058a0","coordinates":[0,0]},"lat":0,"lng":0,"isActive":true,"createdAt":"2017-07-27T18:49:20.799Z","updatedAt":"2017-07-27T18:59:31.205Z","media":[],"photos":[],"isPartner":true,"amenities":[],"activities":[]},{"_id":"59650d94e0dd6465bd205529","name_sort":"stefan_sport_centre_9z1t","multiple_fields":"stefan sport centre 1 bwi airport, baltimore, md 21240, usa ","prefix":"9z1t","name":"Stefan Sport Centre","address":"1 Bwi Airport, Baltimore, MD 21240, USA","country":"us","membership":0,"city":"Baltimore","zipCode":"21240","phoneNumber":null,"loc":{"type":"Point","_id":"597b5a6a0de0600b817317ab","coordinates":[-76.67014749999998,39.17698060000001]},"lat":39.17698060000001,"lng":-76.67014749999998,"streetAddress":null,"state":"MD","isActive":true,"createdAt":"2017-07-11T17:29:42.532Z","updatedAt":"2017-07-11T17:40:36.228Z","media":[],"photos":[],"isPartner":false,"amenities":[],"activities":[]},{"_id":"595d0f2d1f316e0ef971c43f","name_sort":"peak__valleys_n424","multiple_fields":"peak & valley's 430 massachusetts ave, lexington, ma 02420, usa ","prefix":"n424","name":"Peak & Valley's","description":"YES\nno","address":"430 Massachusetts Ave, Lexington, MA 02420, USA","country":"us","membership":123,"city":"Lexington","zipCode":"02420","phoneNumber":"+18685767534","loc":{"type":"Point","_id":"597b5a6a0de0600b817317ac","coordinates":[-71.20143200000001,42.427478]},"lat":42.427478,"lng":-71.20143200000001,"imageSelect":"Screen Shot 2017-05-08 at 7.40.49 PM.png","isRequest":false,"ownerId":"5953de763455077e0e47499e","isActive":true,"createdAt":"2017-06-30T19:46:23.458Z","updatedAt":"2017-07-05T16:09:17.988Z","media":[{"url":"Woke doge.jpg","thumbnails":"Woke doge.jpg","type":"image","date":"2017-07-25T19:31:05.068Z"}],"photos":["Woke doge.jpg"],"isPartner":true,"amenities":["BdYQvWPCzB35Nbbxt","PT98mR2riR92tcPWm","XjnzKHJ6E2gqvWFyH","j9QaXncBghZZEwSyu","oDffpxYNsNPve2J7b","ss7Rz7rySzNuK4gfq","v6awrBDmgDmgHG2Lf","zStdGYMsfZiSwzzAy"],"activities":["4LPPuyEjwD77yZn9E","MDpttjBtd2HSm8knh","NaQdJX2uHMWvDngFj","RRiTTKtjpJyb4prG2","T2yxz7DeutTG8Goqq","c3MieMwtMbEGJbib4","dQ2j5dvdfegWaWazo","i2XYbnkTQroZQ9M4f","okt4BCn3WGBrcDENF","sTHZMS4PpPERExefA"]},{"_id":"59552fd86647bb318476c3d2","name_sort":"no__pencil_rm81","multiple_fields":"no / pencil 639 massachusetts ave, lexington, ma 02420, usa ","prefix":"rm81","name":"No / pencil","address":"7115 Friendship Rd, Baltimore, MD 21240, USA","membership":454,"city":"Baltimore","zipCode":"21240","phoneNumber":"+18685767534","loc":{"type":"Point","_id":"59779f8392ac5c0be80db697","coordinates":[-76.66827030000002,39.1804429]},"lat":39.1804429,"lng":-76.66827030000002,"country":"us","ownerId":"5953de763455077e0e47499e","imageSelect":null,"isRequest":false,"description":"We always want more than we have We always want more than we have And anguish grasps our hearts We stagger in an autumn wind We are filled up with someone else's joy Inflamed by someone else's feasts Like sunshine on a glade We draw our heads nearer over the tables I'll embrace you, tipsy like separation And take you in my arms I won't share you, wild like abuse Either with an enemy or a friend It rarely happens to me like this I will give you a bit of happiness You will swing like light in the windows And moths will rush towards your light","isActive":true,"createdAt":"2017-06-29T16:48:09.504Z","updatedAt":"2017-06-29T16:50:32.590Z","media":[],"photos":[],"sunday":{"out":"","in":""},"saturday":{"out":"","in":""},"friday":{"out":"","in":""},"thursday":{"out":"","in":""},"wednesday":{"out":"","in":""},"tuesday":{"out":"","in":""},"monday":{"out":"","in":""},"isPartner":true,"amenities":[],"activities":[]},{"_id":"3NWfmqnNuFnP4YKA6","name":"CrossFit 858 - Mission Gorge","address":"5841 Mission Gorge Rd H","city":"San Diego","state":"CA","zipCode":"92120","loc":{"type":"Point","_id":"596513b5e0dd6465bd20553a","coordinates":[-117.099942,32.781491]},"lat":32.781491,"lng":-117.099942,"name_sort":"crossfit_858_-_mission_gorge_dcmy","phoneNumber":"","membership":200,"owners":[],"multiple_fields":"CrossFit 858 - Mission Gorge 5841 Mission Gorge Rd H San Diego CA 92120","prefix":"dcmy","country":"us","imageSelect":"","isRequest":false,"isActive":true,"createdAt":"2017-07-27T23:26:45.043Z","updatedAt":"2017-07-27T23:26:45.042Z","media":[],"photos":[],"sunday":{"out":"","in":""},"saturday":{"out":"","in":""},"friday":{"out":"","in":""},"thursday":{"out":"","in":""},"wednesday":{"out":"","in":""},"tuesday":{"out":"","in":""},"monday":{"out":"","in":""},"isPartner":true,"amenities":["XjnzKHJ6E2gqvWFyH"],"activities":["RMMHdDRQfYoH8bXCR","okt4BCn3WGBrcDENF"]},{"_id":"585c57515c01594eb6cfbc3b","name":"Spencer Pilates Arts","address":"108-12 72nd Ave","city":"Queens","state":"NY","zipCode":"11375","country":"us","latitude":"40.719604","longitude":"-73.842170","phoneNumber":"","Description":"","loc":{"type":"Point","_id":"597b5a6a0de0600b817317af","coordinates":[-73.84217,40.719604]},"lat":40.719604,"lng":-73.84217,"multiple_fields":"Spencer Pilates Arts 108-12 72nd Ave Queens NY 11375","name_sort":"spencer_pilates_arts_e2bb","prefix":"e2bb","imageSelect":"","isRequest":false,"membership":0,"isActive":true,"createdAt":"2017-07-27T23:26:45.043Z","updatedAt":"2017-07-27T23:26:45.042Z","media":[],"photos":[],"isPartner":true,"amenities":[],"activities":[]},{"_id":"t7KGhSctPihW4axmY","ownerId":"5953de763455077e0e47499e","name":"Dimension 7 Fitness / D7F","description":"is it?","address":"653 US-1, Bridgeport, CT 06610, USA","state":"CT","country":"us","membership":0,"city":"Bridgeport","zipCode":"06610","phoneNumber":"+18298349278","loc":{"type":"Point","_id":"597b5a6a0de0600b817317b0","coordinates":[-73.1792251,41.1979481]},"lat":41.1979481,"lng":-73.1792251,"isRequest":false,"prefix":"5aeh","name_sort":"dimension_7_fitness__d7f_5aeh","imageSelect":"","multiple_fields":"dimension 7 fitness / d7f 653 us-1, bridgeport, ct 06610, usa ","isActive":true,"createdAt":"2017-07-27T23:26:45.043Z","updatedAt":"2017-07-27T23:26:45.042Z","media":[],"photos":[],"sunday":{"out":"","in":""},"saturday":{"out":"","in":""},"friday":{"out":"","in":""},"thursday":{"out":"","in":""},"wednesday":{"out":"","in":""},"tuesday":{"out":"","in":""},"monday":{"out":"","in":""},"isPartner":false,"amenities":[],"activities":[]}];

const users = [{"_id":"597a0af692ac5c0be80db764","email":"josafat+new3@zipdev.co","role":"595e7e3d001c693ae178f4af","password":"$2a$10$avjT/ujnHXJ.kZzSvGJPDOtRmh/MulLwgNxB4v4HcwUCSjHM5GbW6","resetPasswordExpires":"2017-07-27T16:47:03.020Z","resetPasswordToken":"882a33d22b3fee097e6157a93eb19265","isActive":true,"createdAt":"2017-07-25T19:16:10.113Z","updatedAt":"2017-07-27T15:47:03.026Z","roles":[],"profile":{"name":"Kimi ","lastName":"no"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":false},{"_id":"596f8aec7863ce42a52af4d4","email":"josafat+new2@zipdev.co","role":"595e7e46001c693ae178f4b0","password":"$2a$10$eefXWCdnb2hgQQ5Kj4jFTOYZDNwtfYJo2N1R86eCMbeXspJrjg4Ja","resetPasswordExpires":null,"resetPasswordToken":null,"isActive":true,"createdAt":"2017-07-19T15:55:11.434Z","updatedAt":"2017-07-19T16:38:46.827Z","roles":[],"profile":{"name":"NEw new","lastName":"New"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"5953de763455077e0e47499e","email":"josafat+morty2@zipdev.co","role":"594be018ef063c0ddfd81edc","password":"$2a$10$YFQgCnpbLDzrIQcJtVkCTuWt274veNjNpWeYuRKnTHOsWUULmReaW","resetPasswordExpires":null,"resetPasswordToken":null,"isActive":true,"createdAt":"2017-07-13T17:28:51.068Z","updatedAt":"2017-07-13T17:48:11.388Z","roles":[],"profile":{"name":"My","lastName":"Man"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"595e7561001c693ae178f4ac","email":"josafat+user1@zipdev.co","role":"595e61311f316e0ef971c450","password":"$2a$10$YmtrqxZb4.EDKuS6Taf.EOOpbego..xoZHEI5GCljvEZPzvixaHZO","resetPasswordExpires":"2017-07-06T18:37:37.588Z","resetPasswordToken":"ed7f2fc88765606504e551169ed719d0","isActive":true,"createdAt":"2017-07-06T17:05:06.807Z","updatedAt":"2017-07-06T17:37:37.593Z","roles":[],"profile":{"name":"Another","lastName":"usr"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":false},{"_id":"59554d50ee2d2e452b6bc3dd","email":"josafat+another1@zipdev.co","password":"$2a$10$wgXeVCWIaCjHzT2p8ryvJuVIDVlyEvw9U/HU0DrZDPimCs/mPjt8u","role":"594d5f31ef063c0ddfd81ef4","resetPasswordExpires":"2017-06-29T19:56:16.759Z","resetPasswordToken":"185964a83be439b2827ba9dfff8f0602","isActive":true,"createdAt":"2017-06-29T18:27:39.574Z","updatedAt":"2017-06-29T18:56:16.772Z","roles":[],"profile":{"name":"Anotehr one","lastName":"aond"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":false},{"_id":"59553cbe6647bb318476c3ef","email":"josafat+isnt@zipdev.co","role":"595292c1a47ec622e18de1d3","password":"$2a$10$PAuOQiOddhf272KAvpVc/e0advqumccNIY5/09sP5JoyCi4fj2eci","resetPasswordExpires":null,"resetPasswordToken":null,"isActive":true,"createdAt":"2017-06-29T16:48:09.543Z","updatedAt":"2017-06-29T17:47:53.801Z","roles":[],"profile":{"name":"HAmmer","lastName":"Wongt"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"5953ff3081188a1b896003fd","email":"josafat+ni@zipdev.co","password":"$2a$10$iI4q6nURO6va1KN4PNCQ.ukHMCLC.PFbUIUbgW5BT2B7MnPzxOeE.","role":"594d5f31ef063c0ddfd81ef4","resetPasswordExpires":null,"resetPasswordToken":null,"isActive":true,"createdAt":"2017-06-28T18:21:35.976Z","updatedAt":"2017-06-28T19:11:09.857Z","roles":[],"profile":{"name":"ghgdh","lastName":"fdh"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"5953de063455077e0e47499d","email":"josafat+morty1@zipdev.co","role":"594d5f28ef063c0ddfd81ef3","password":"$2a$10$X.tz.6MeGDqPqFqJD2m/guPqueP2xTVzSWbmaAa1SQUErtZOmtrKm","resetPasswordExpires":null,"resetPasswordToken":null,"isActive":true,"createdAt":"2017-06-28T16:42:15.801Z","updatedAt":"2017-06-28T16:49:30.796Z","roles":[],"profile":{"name":"My ","lastName":"man"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"594be018ef063c0ddfd81edb","email":"josafat+myman1@zipdev.co","password":"$2a$10$oLX.ma41YleoCLWHs7ErheQrKCSLe1NoRhseTHcYeHumAI5bdsg/6","role":"594d5f31ef063c0ddfd81ef4","isActive":true,"createdAt":"2017-06-21T16:31:58.047Z","updatedAt":"2017-06-22T15:19:52.849Z","roles":[],"profile":{"name":"My","lastName":"Man"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"594bf89fef063c0ddfd81ee0","email":"josafat+user001@zipdev.co","role":"594be018ef063c0ddfd81edc","password":"$2a$10$0PYBA9UoBTyfXiaJ2LHE0u8sc.2dp98vzalBIAgp9qxI1sVGcCOaa","isActive":false,"createdAt":"2017-06-21T16:31:58.047Z","updatedAt":"2017-06-22T17:04:31.368Z","roles":[],"profile":{"name":"REvoa","lastName":"mdaldas"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"595287cdef063c0ddfd81ef9","email":"josafat+ichi@zipdev.co","role":"594be018ef063c0ddfd81edc","password":"$2a$10$x19bDbHLhYIuPvHBh.G3Y.hmH1zYQItvfDZYtpk3ZmJEUfc.bbDqa","isActive":true,"createdAt":"2017-06-21T16:31:58.047Z","updatedAt":"2017-06-27T16:29:01.668Z","roles":[],"profile":{"name":"ICHI","lastName":"NI"},"passes":[],"emails":[],"services":{"resume":{"loginTokens":[]}},"verifiedEmail":true},{"_id":"vamN6GF6XuG854cvL","email":"ml+216@zipdev.co","password":"$2a$10$2sQV1Rr1wawDdIf5ltNower9778/bU/GSzhuDXTQNq0PW6pcNZLuS","resetPasswordExpires":"2017-07-12T19:08:55.790Z","resetPasswordToken":"63e9af994d560b68950aceb30bec6908","isActive":true,"createdAt":"2017-02-16T17:46:51.731Z","updatedAt":"2017-07-12T18:08:55.796Z","roles":[""],"profile":{"name":"Mike 216","lastName":"Mike 216"},"passes":[],"emails":[{"address":"ml+216@zipdev.co","verified":true}],"services":{"password":{"bcrypt":"$2a$10$64zn9xujx4.xfglqBBE1TevjO/35o8XAK0QbDxFpLiHgXiYvoELjK"},"resume":{"loginTokens":[]}},"verifiedEmail":false}]

const parsedData = {"_id":"594be019ef063c0ddfd81edd","name":"root","description":"Default location","parent":null,"ancestors":[],"gyms":[],"users":[],"isActive":true,"children":[{"_id":"597a084b92ac5c0be80db761","name":"Japan town","description":"wew","parent":"594be019ef063c0ddfd81edd","ancestors":["594be019ef063c0ddfd81edd"],"gyms":[],"users":[],"isActive":true,"children":[{"_id":"597a087092ac5c0be80db762","name":"Ikekuburo","description":"Gang battle","parent":"597a084b92ac5c0be80db761","ancestors":["594be019ef063c0ddfd81edd","597a084b92ac5c0be80db761"],"gyms":[{"_id":"595d0f2d1f316e0ef971c43f","name":"Peak & Valley's"}],"users":[],"isActive":true,"children":[{"_id":"595d0f2d1f316e0ef971c43f","name":"Peak & Valley's","type":"gym","parentId":"597a087092ac5c0be80db762"}],"type":"location"}],"type":"location"},{"_id":"597a082f92ac5c0be80db760","name":"Another one","description":"Heroes","parent":"594be019ef063c0ddfd81edd","ancestors":["594be019ef063c0ddfd81edd"],"gyms":[],"users":[],"isActive":true,"children":[],"type":"location"},{"_id":"597789fcc2f3624490f7bd67","name":"Maryland - Land of the merriness","description":";)","parent":"594be019ef063c0ddfd81edd","ancestors":["594be019ef063c0ddfd81edd"],"gyms":[{"_id":"595d0f2d1f316e0ef971c43f","name":"Peak & Valley's"}],"users":[],"isActive":true,"children":[{"_id":"59778a32c2f3624490f7bd68","name":"Wellbridge","description":"The description is required ;)","parent":"597789fcc2f3624490f7bd67","ancestors":["594be019ef063c0ddfd81edd","597789fcc2f3624490f7bd67"],"gyms":[],"users":[],"isActive":true,"children":[],"type":"location"},{"_id":"595d0f2d1f316e0ef971c43f","name":"Peak & Valley's","type":"gym","parentId":"597789fcc2f3624490f7bd67"}],"type":"location"}],"type":"company","parsed":true};


const muiTheme = getMuiTheme();
const shallowWithContext = (node) => shallow(node, { context: { muiTheme } });
function setup() {
  const props = {
    data,
    users,
    gyms,
    handleSubmit: jest.fn(),
  };

  const enzymeWrapper = shallowWithContext(<Organization {...props} />);

  return {
    props,
    enzymeWrapper,
  };
}


describe('Organization Module', () => {
  it('should parse data correctly', () => {

    expect(JSON.stringify(parseNode(data, true))).toEqual(JSON.stringify(parsedData));
  });
  it('Should render companies tab', () => {
      const { enzymeWrapper } = setup();
      // console.log((enzymeWrapper.find(TreeForms).first().find(Tab)))
      /*  const dialog = enzymeWrapper.find(Dialog);
        const titleWrapper = shallow(dialog.props().title);
        const titleText = titleWrapper.find(Col).first().props().children;
        expect(enzymeWrapper.find(Dialog).length).toEqual(1);
        expect(titleText).toEqual('ASSIGN USER');*/
  });
});
